{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}Digno Writer Dashboard{% endblock %}

{% block extrahead %}
    {{ block.super }}
    <style>
        /* Better color scheme for Digno admin */
        #header {
            background: linear-gradient(135deg, #2C3E50 0%, #3498DB 100%);
            color: white;
            border-bottom: 3px solid #E74C3C;
        }
        
        .module h2, .module caption, .inline-group h2 {
            background: #34495E;
            color: white;
            border: none;
        }
        
        #branding h1, #branding h1 a:link, #branding h1 a:visited {
            color: white;
            font-weight: 600;
            font-size: 1.4em;
        }
        
        #branding h1:before {
            content: "üì∞ ";
            font-size: 1.2em;
            margin-right: 8px;
        }
        
        .button, input[type=submit], input[type=button], .submit-row input, a.button {
            background: #E74C3C;
            border: none;
            border-radius: 6px;
            transition: all 0.3s ease;
            color: white;
            font-weight: 500;
        }
        
        .button:hover, input[type=submit]:hover, input[type=button]:hover, .submit-row input:hover, a.button:hover {
            background: #C0392B;
            transform: translateY(-1px);
            color: white;
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #E74C3C;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #7F8C8D;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 0.5px;
        }
        
        .quick-actions {
            background: linear-gradient(135deg, #ECF0F1 0%, #BDC3C7 100%);
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
            border: 1px solid #D5DBDB;
        }
        
        .quick-actions h3 {
            margin-top: 0;
            color: #2C3E50;
            font-size: 1.3em;
            margin-bottom: 15px;
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .action-button {
            background: #E74C3C;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-block;
            font-weight: 500;
            border: none;
        }
        
        .action-button:hover {
            background: #C0392B;
            color: white;
            text-decoration: none;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(192, 57, 43, 0.3);
        }
        
        .welcome-message {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            border-left: 5px solid #3498DB;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .welcome-message h2 {
            color: #2C3E50;
            margin-bottom: 8px;
        }
        
        .welcome-message p {
            color: #7F8C8D;
            margin: 0;
        }
        
        /* Improve sidebar */
        #nav-sidebar {
            background: #34495E;
        }
        
        #nav-sidebar .module th {
            background: #2C3E50;
        }
        
        #nav-sidebar .module th a {
            color: white;
        }
        
        /* Better link colors */
        a:link, a:visited {
            color: #3498DB;
        }
        
        a:hover {
            color: #E74C3C;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="welcome-message">
        <h2>Welcome back, {{ user.first_name|default:user.username }}! üëã</h2>
        <p>Ready to create amazing content? Your writing dashboard is here to help you manage your articles efficiently.</p>
    </div>
    
    <div class="dashboard-stats">
        {% if user_articles is not None %}
            <div class="stat-card">
                <div class="stat-number">{{ user_articles }}</div>
                <div class="stat-label">Your Articles</div>
            </div>
        {% endif %}
        
        {% if user_published is not None %}
            <div class="stat-card">
                <div class="stat-number">{{ user_published }}</div>
                <div class="stat-label">Published</div>
            </div>
        {% endif %}
        
        {% if user_drafts is not None %}
            <div class="stat-card">
                <div class="stat-number">{{ user_drafts }}</div>
                <div class="stat-label">Drafts</div>
            </div>
        {% endif %}
        
        {% if user.is_superuser and total_articles is not None %}
            <div class="stat-card">
                <div class="stat-number">{{ total_articles }}</div>
                <div class="stat-label">Total Platform Articles</div>
            </div>
        {% endif %}
    </div>
    
    <div class="quick-actions">
        <h3>‚úçÔ∏è Quick Actions</h3>
        <div class="action-buttons">
            <a href="{% url 'admin:articles_article_add' %}" class="action-button">
                üìù Write New Article
            </a>
            <a href="{% url 'admin:articles_article_changelist' %}" class="action-button">
                üìö Manage Articles
            </a>
            {% if user.is_superuser %}
                <a href="{% url 'admin:users_user_changelist' %}" class="action-button">
                    üë• Manage Users
                </a>
                <a href="{% url 'admin:donations_donation_changelist' %}" class="action-button">
                    üí∞ View Donations
                </a>
            {% endif %}
        </div>
    </div>
    
    {{ block.super }}
{% endblock %}

{% block content %}
    <div class="welcome-message">
        <h2>Welcome back, {{ user.first_name|default:user.username }}! üëã</h2>
        <p>Ready to create amazing content? Your writing dashboard is here to help you manage your articles efficiently.</p>
    </div>
    
    <div class="dashboard-stats">
        {% if user_articles is not None %}
            <div class="stat-card">
                <div class="stat-number">{{ user_articles }}</div>
                <div class="stat-label">Your Articles</div>
            </div>
        {% endif %}
        
        {% if user_published is not None %}
            <div class="stat-card">
                <div class="stat-number">{{ user_published }}</div>
                <div class="stat-label">Published</div>
            </div>
        {% endif %}
        
        {% if user_drafts is not None %}
            <div class="stat-card">
                <div class="stat-number">{{ user_drafts }}</div>
                <div class="stat-label">Drafts</div>
            </div>
        {% endif %}
        
        {% if user.is_superuser and total_articles is not None %}
            <div class="stat-card">
                <div class="stat-number">{{ total_articles }}</div>
                <div class="stat-label">Total Platform Articles</div>
            </div>
        {% endif %}
    </div>
    
    <div class="quick-actions">
        <h3>‚úçÔ∏è Quick Actions</h3>
        <div class="action-buttons">
            <a href="{% url 'admin:articles_article_add' %}" class="action-button">
                üìù Write New Article
            </a>
            <a href="{% url 'admin:articles_article_changelist' %}" class="action-button">
                ÔøΩ Manage Articles
            </a>
            {% if user.is_superuser %}
                <a href="{% url 'admin:users_user_changelist' %}" class="action-button">
                    üë• Manage Users
                </a>
                <a href="{% url 'admin:donations_donation_changelist' %}" class="action-button">
                    üí∞ View Donations
                </a>
            {% endif %}
        </div>
    </div>
    
    {{ block.super }}
{% endblock %}